(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{1164:function(i,t,e){"use strict";e(764)},1165:function(i,t,e){},1465:function(i,t,e){"use strict";e.r(t);var n=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{ref:"ribbon",class:["ribbon",i.isOpen?"ribbon--open":""],on:{click:i.closeRibbon}},[e("div",{ref:"ribbon__title-container",staticClass:"ribbon__title-container"},[e("h5",{staticClass:"ribbon__title s-text-white",attrs:{id:"ribbon-title"},domProps:{innerHTML:i._s(i.ribbonTitle)}})]),i._v(" "),e("div",{class:["ribbon__nav-container"]},[i.navigationalLinksList?e("nav",{ref:"ribbon__main-ribbon",class:["ribbon__main-ribbon",i.pageNavigation,{invisible:!i.pageLoaded}],attrs:{"aria-label":"Ribbon Navigation"}},[e("ul",{staticClass:"ribbon__main-ribbon-list",attrs:{"aria-label":"menu options",role:"menu"}},i._l(i.navigationalLinksList,(function(t,n){return e("li",{key:n,class:[n+1===i.navigationalLinksList.length?"hidden ribbon__chat slide-left-right":"slide-left-right"],attrs:{role:"presentation",id:n+1===i.navigationalLinksList.length?"ribbonNavChat":null}},[i.stateSource?e("a",{class:[{"active-true":t.active},{disabled:t.disabled}],attrs:{tabindex:t.active||i.activeItem>1||n<i.activeItem?"0":"-1","aria-current":t.active?"page":null,role:"menuitem",href:n+1===i.navigationalLinksList.length?"#":null,"data-soa-analytics-link-name":t.name,"data-soa-analytics-link-type":"ribbon-navigation:text_link"},on:{click:function(e){return e.stopPropagation(),i.triggerEvent(t,e)}}},[i.pageRibbon.checkMarks?e("span",[n<i.activeItem?e("span",[e("svg",{staticClass:"ribbon__checkMark",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15","data-name":"Layer 1"}},[e("line",{staticClass:"cls-1",attrs:{x1:"1.31",y1:"8",x2:"5.8",y2:"12.49"}}),i._v(" "),e("line",{staticClass:"cls-1",attrs:{x1:"5.8",y1:"12.5",x2:"13.8",y2:"4.5"}})])]):e("span",[i._v("\n                "+i._s(n+1!==i.navigationalLinksList.length?n+1+".":"")+"\n              ")])]):i._e(),i._v("\n            "+i._s(n+1!==i.navigationalLinksList.length?t.name:i.chatCopy)+"\n          ")]):e("subaru-cta",{attrs:{"cta-style":"cta--text-link",customClass:"active-"+t.active,"cta-label":n+1!==i.navigationalLinksList.length?t.name:i.chatCopy,"cta-url":t.active||n+1===i.navigationalLinksList.length?"#":t.path+".html","cta-tab-index":0,"aria-current":t.active?"page":null,role:"menuitem"}})],1)})),0)]):i._e(),i._v(" "),i.navigationalLinksList?e("div",{directives:[{name:"show",rawName:"v-show",value:!i.isMobile||i.isMobile&&!i.pageRibbon.hideItemsOnMobile||i.isMobile&&i.pageRibbon.hideItemsOnMobile&&i.chatVisible,expression:"!isMobile ||\n        isMobile && !pageRibbon.hideItemsOnMobile ||\n        isMobile && pageRibbon.hideItemsOnMobile && chatVisible"}],ref:"ribbon__arrow-container",class:["ribbon__arrow-container",{invisible:!i.pageLoaded},i.showArrowContainer?"":"hidden"]},[e("button",{ref:"ribbon__arrow",staticClass:"ribbon__arrow",attrs:{"aria-label":"open more menu options","aria-haspopup":"menu","aria-expanded":i.isOpen,"aria-controls":"hiddenRibbonMenu",id:"ribbonMenuButton"},on:{click:function(t){t.stopPropagation(),i.isOpen?i.closeRibbon():i.openRibbon()}}},[e("div",{class:["ribbon__arrow-down",i.isOpen?"ribbon__arrow-up":""]})]),i._v(" "),e("div",{staticClass:"ribbon__separator"})]):i._e(),i._v(" "),i.navigationalLinksList?e("nav",{ref:"ribbon__hidden-ribbon",class:["ribbon__hidden-ribbon",i.pageNavigation,{invisible:!i.pageLoaded},i.isOpen?"ribbon__hidden-ribbon--open slide-open":"slide-close"],attrs:{"aria-label":"more "+i.title+" menu options"},on:{click:function(t){return t.stopPropagation(),i.hiddenRibbonClicked.apply(null,arguments)}}},[e("ul",{staticClass:"ribbon__hidden-ribbon-list",attrs:{"aria-label":"more menu options",role:"menu",id:"hiddenRibbonMenu"}})]):i._e(),i._v(" "),i.backToRibbon&&i.backToRibbon.hasOwnProperty("path")&&""!==i.backToRibbon.path?e("div",[e("subaru-cta",{staticClass:"ribbon__backTo horizontal-flex-center",attrs:{"cta-style":"cta--text-link","color-class-names":"cta--light-grey","cta-url":i.ribbonOverwritePath?i.backToRibbon.path:i.backToRibbon.path+".html","cta-tab-index":0,"data-soa-analytics-link-name":"ribbon::back-to-link"},on:{"cta-click":i.emitBackClick}},[e("span",{staticClass:"ribbon__backTo-label--md"},[i._v("\n          "+i._s(i.ribbonPageTitleMobile?i.ribbonPageTitleMobile:"")+"\n        ")]),i._v(" "),e("span",{staticClass:"ribbon__backTo-label--lg"},[i._v("\n          "+i._s(i.ribbonPageTitle)+"\n        ")])])],1):i._e(),i._v(" "),i.navigationalLinksList||i.backToRibbon?i._e():e("subaru-cta",{staticClass:"hidden ribbon__chat-unconnected horizontal-flex-center",attrs:{id:"ribbonNavChat","cta-style":"cta--text-link","color-class-names":"cta--light-grey","cta-label":"Chat","cta-url":"#","cta-tab-index":0}})],1)])};n._withStripped=!0;var a=e(468),s=e(207),o={name:"subaru-ribbon",props:{title:String,layoutData:String,pageNavigation:String,pageTitle:{type:String,default:""},pageTitleMobile:{type:String,default:""},overwritePath:{type:Boolean,default:!1},dockingDisabled:{type:Boolean,default:!1},layoutDataSource:{type:String,default:""}},data(){return{navigationalLinksList:null,backToRibbon:{},isOpen:!1,ribbonElementsWidth:0,isMobile:!1,isScrollable:!1,header:{},mainNavigation:{},titleContainer:{},mainRibbon:{},mainRibbonList:{},hiddenRibbon:{},hiddenRibbonList:{},arrowContainer:{},showArrowContainer:!0,arrow:{},chat:{},chatCopy:this.$store.getters.getTranslation("component-navigation-ribbon-chat"),ribbonTitle:"",ribbonPageTitle:"",ribbonPageTitleMobile:"",ribbonOverwritePath:!1,pageLoaded:!1,stateSource:"",pageRibbon:{},chatVisible:!1,RIBBON_CONTAINERS:{hiddenRibbonMenu:null},RIBBON_CONTAINERS_INDEX:{hiddenRibbonMenu:1},FOCUSTRAP_CONTAINERS:{}}},computed:{dataItems(){return this.layoutData&&!this.stateSource?JSON.parse(this.layoutData.replace(/\'/g,'"')):[]},backToState(){return this.$store.getters.getGlobalFooterBackTo},activeItem(){return this.navigationalLinksList.findIndex(i=>1==i.active)},activeIndexBP(){return this.$store.getters["sBuildAndPrice/getActiveIndex"]},navItemsRequest(){return this.$store.getters[this.stateSource+"/getNavItems"]}},watch:{backToState(){this.globalFooterBackTo()},activeIndexBP(){"sBuildAndPrice"===this.layoutDataSource&&this.focusElement(this.$refs["ribbon__main-ribbon"].querySelectorAll("a")[this.activeIndexBP])}},created(){var i=null,t=null;this.ribbonTitle=this.title,this.ribbonPageTitleMobile=this.pageTitleMobile,this.ribbonPageTitle=this.pageTitle,this.ribbonOverwritePath=this.overwritePath;var e=this.$subaruUtils.getCurrentMediaMatch();if(this.isMobile="sm"===e||"md"===e,this.stateSource=this.layoutDataSource,this.stateSource){var n=this.navItemsRequest||{};this.pageRibbon=n.pageRibbon,n.navigationalLinks.forEach((i,t)=>{i.name=this.$store.getters.getTranslation(i.name)||(null==i?void 0:i.defaultName)}),this.navigationalLinksList=n.navigationalLinks,this.ribbonTitle=this.pageRibbon.name}else this.ribbonTitle=this.title,this.navigationalLinksList=this.dataItems.navigationalLinks?this.dataItems.navigationalLinks:null;this.navigationalLinksList&&(i=this.navigationalLinksList.filter(i=>i.navIndex>=0),t=this.navigationalLinksList.filter(i=>!i.navIndex&&0!==i.navIndex),this.navigationalLinksList=i,this.navigationalLinksList.sort((i,t)=>i.navIndex-t.navIndex),this.navigationalLinksList=this.navigationalLinksList.concat(t),this.navigationalLinksList.push({name:"",path:"",active:!1,navIndex:null})),this.backToRibbon=this.dataItems?this.dataItems.backToRibbon:""},mounted(){var i;this.globalFooterBackTo(),this.header=document.querySelector(".navigation_001"),this.mainNavigation=document.querySelector(".main-navigation__container"),this.titleContainer=this.$refs["ribbon__title-container"],this.mainRibbon=this.$refs["ribbon__main-ribbon"],this.mainRibbonList=this.mainRibbon?this.mainRibbon.querySelector("ul"):null,this.hiddenRibbon=this.$refs["ribbon__hidden-ribbon"],this.hiddenRibbonList=this.hiddenRibbon?null===(i=this.hiddenRibbon)||void 0===i?void 0:i.querySelector("ul"):null,this.arrowContainer=this.$refs["ribbon__arrow-container"],this.arrow=this.$refs.ribbon__arrow,this.chat=document.querySelector(".ribbon__chat"),document.addEventListener("readystatechange",()=>{this.mainRibbon&&"complete"===document.readyState&&(this.bindEvents(),this.addToHiddenRibbon(),this.pageLoaded="complete"===document.readyState)}),this.eventHandler=Object(s.a)((i,t)=>{t&&(t.stopPropagation(),t.preventDefault()),this.isOpen&&this.closeRibbon(),t.target===this.chat||t.target.closest(".ribbon__chat")||a.a.$emit("indexTrigger",i.navIndex)},200),this.chat&&new MutationObserver(i=>{if(this.chatVisible="class"===i[0].attributeName&&!i[0].target.classList.contains("hidden"),this.isMobile)for(var t of Array.from(this.hiddenRibbonList.querySelectorAll("li")))this.hideHiddenRibbonItems(t);else this.addToHiddenRibbon()}).observe(this.chat,{attributes:!0,attributeFilter:["class"]})},updated(){this.pageLoaded||(this.bindEvents(),this.addToHiddenRibbon(),this.pageLoaded=!0)},methods:{triggerEvent(i){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i.active||this.eventHandler(i,t)},hiddenRibbonClicked(i){this.isScrollable||this.closeRibbon()},eventListener(i){this.$subaruServices.binder.on(this.$subaruUtils.isTouchDevice()?"touchstart, focusin":"click, focusin",i,i=>{this.closeRibbon()})},globalFooterBackTo(){var i=this.$store.getters.getGlobalFooterBackTo;i.ribbonOverwritePath&&(this.ribbonOverwritePath=i.ribbonOverwritePath,this.backToRibbon={path:null===i.path?this.backToRibbon.path+".html":i.path},this.ribbonPageTitle=null===i.ribbonPageTitle?this.ribbonPageTitle:i.ribbonPageTitle,this.ribbonPageTitleMobile=null===i.ribbonPageTitleMobile?this.ribbonPageTitleMobile:i.ribbonPageTitleMobile,this.ribbonTitle=null===i.ribbonTitle||""===i.ribbonTitle?this.ribbonTitle:i.ribbonTitle)},hideHiddenRibbonItems(i){this.isMobile&&i!=this.chat&&this.pageRibbon.hideItemsOnMobile&&this.chatVisible?i.classList.add("hidden"):i!=this.chat&&i.classList.remove("hidden")},emitBackClick(){this.$emit("back-click",this.pageTitle),a.a.$emit("back-click",this.pageTitle)},addToHiddenRibbon:function(){var i=1;if(!this.isMobile&&(this.ribbonElementsWidth=0,this.addToMainRibbon(),this.mainRibbonList))for(var t of this.mainRibbonList.querySelectorAll("li"))this.ribbonElementsWidth+=parseInt(t.offsetWidth);if(this.mainRibbonList&&(this.mainRibbonList.querySelectorAll("li").length>2||!this.chat.matches(".hidden")))for(var e of Array.from(this.mainRibbonList.querySelectorAll("li")).reverse())this.hideHiddenRibbonItems(e),(parseInt(this.$el.offsetWidth)-parseInt(this.titleContainer.offsetWidth)-(this.hiddenRibbonList.querySelectorAll("li").length?parseInt(this.arrowContainer.offsetWidth):0)-45<parseInt(this.ribbonElementsWidth)||this.isMobile)&&(e.setAttribute("data-order",i),this.ribbonElementsWidth-=e.offsetWidth,this.hiddenRibbonList.insertBefore(e,this.hiddenRibbonList.childNodes[0]),i+=1);this.arrowVisibility()},ribbonScrollable:function(){var i=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=this.header.offsetTop?this.$el.clientHeight:this.header.clientHeight;this.isOpen&&this.hiddenRibbonList.clientHeight+t>i?(this.hiddenRibbon.style.height=i-t+"px",document.body.classList.add("overflow-hidden"),this.isScrollable=!0):this.removeRibbonScroll()},addToMainRibbon:function(){if(this.hiddenRibbonList)for(var i of this.hiddenRibbonList.querySelectorAll("li"))this.mainRibbonList.appendChild(i)},arrowVisibility:function(){this.hiddenRibbonList&&(this.showArrowContainer=!!this.hiddenRibbonList.firstElementChild)},setRibbonContainers(){for(var i in this.RIBBON_CONTAINERS)if(this.RIBBON_CONTAINERS.hasOwnProperty(i)){var t=document.querySelector("#"+i),e=document.querySelector('button[aria-controls="'+i+'"]'),n=new this.$subaruHelpers.FocusTrap(t,{triggerElement:e});t&&(t.dataset.order=this.RIBBON_CONTAINERS_INDEX[i],this.RIBBON_CONTAINERS[i]=t,this.FOCUSTRAP_CONTAINERS[i]=n)}},openRibbon:function(){if(!this.isOpen){this.setRibbonContainers();var i=this.FOCUSTRAP_CONTAINERS.hiddenRibbonMenu;i&&i.activate(),this.$subaruHelpers.pageOverlay.show({modifier:"ribbonOpen"}),this.$subaruUtils.slideAnimation(this.hiddenRibbonList.querySelectorAll("li"),{state:"close"},{delay:50}),this.isOpen=!0,this.ribbonScrollable()}},closeRibbon:function(){if(this.isOpen){var i=this.FOCUSTRAP_CONTAINERS.hiddenRibbonMenu;i&&i.deactivate(),this.$subaruHelpers.pageOverlay.hide(),this.$subaruUtils.slideAnimation(this.hiddenRibbonList.querySelectorAll("li"),{delay:30}),this.isOpen=!1,this.isScrollable&&this.removeRibbonScroll()}},removeRibbonScroll:function(){var i;this.hiddenRibbon&&(null===(i=this.hiddenRibbon)||void 0===i||i.removeAttribute("style"));document.body.classList.remove("overflow-hidden"),this.isScrollable=!1},focusElement:function(i){setTimeout(()=>{i.focus()},200)},bindEvents(){this.$subaruServices.windowListener.resizeObserver.subscribe(()=>{var i;!this.isOpen&&this.hiddenRibbon&&(null===(i=this.hiddenRibbon)||void 0===i||i.classList.remove("slide-close"));"sm"===this.$subaruUtils.getCurrentMediaMatch()||"md"===this.$subaruUtils.getCurrentMediaMatch()?(this.isMobile=!0,this.addToMainRibbon(),this.addToHiddenRibbon()):1==this.isMobile?(this.isMobile=!1,this.addToHiddenRibbon()):this.addToHiddenRibbon(),this.ribbonScrollable()}),this.eventListener(document.querySelector(".page-overlay")),this.mainNavigation&&this.eventListener(this.mainNavigation),document.addEventListener("keydown",i=>{var t=document.activeElement;if(t.closest(".ribbon")){var e,n;9!=i.keyCode&&i.preventDefault();var a=t.closest(".ribbon__main-ribbon"),s=t.closest(".ribbon__hidden-ribbon"),o=t.matches(".ribbon__arrow"),l=null,b=null,r=!1,h=this.hiddenRibbon?null===(e=this.hiddenRibbon)||void 0===e?void 0:e.querySelector("a"):null,c=this.hiddenRibbonList.lastElementChild?null===(n=this.hiddenRibbonList)||void 0===n?void 0:n.lastElementChild.querySelector("a"):null;c&&c.closest("li").previousElementSibling&&this.chat.matches(".hidden")&&(c=c.closest("li").previousElementSibling.querySelector("a"));var d=this.mainRibbonList.querySelector("a"),u=this.mainRibbonList.lastElementChild?this.mainRibbonList.lastElementChild.querySelector("a"):null;switch(u&&!h&&u.closest("li").previousElementSibling&&this.chat.matches(".hidden")&&(u=u.closest("li").previousElementSibling.querySelector("a")),t.closest("li")&&(t.closest("li").nextElementSibling&&t.closest("li").nextElementSibling.querySelector("a")&&(r=(l=t.closest("li").nextElementSibling.querySelector("a")).closest("li").matches(".ribbon__chat")),t.closest("li").previousElementSibling&&t.closest("li").previousElementSibling.querySelector("a")&&(b=t.closest("li").previousElementSibling.querySelector("a"))),i.keyCode){case 27:s?(this.closeRibbon(),this.arrow.focus()):o&&this.closeRibbon();break;case 35:a&&u?u.focus():s&&c&&c.focus();break;case 36:a?d.focus():s&&h.focus();break;case 32:case 13:o?(this.openRibbon(),this.focusElement(h)):s?(this.closeRibbon(),this.focusElement(this.arrow),i.target.classList.contains("disabled")||t.click()):a&&(this.closeRibbon(),i.target.classList.contains("disabled")||t.click());break;case 38:o?(this.openRibbon(),this.focusElement(c)):s&&(b?b.focus():c&&c.focus());break;case 39:a&&(l?r&&this.chat.matches(".hidden")?d.focus():l.focus():d.focus());break;case 40:o?(this.openRibbon(),this.focusElement(h)):s&&(l?r&&this.chat.matches(".hidden")?h.focus():l.focus():h.focus());break;case 37:a&&(b?b.focus():u&&u.focus())}}})}}},l=(e(1164),e(4)),b=Object(l.a)(o,n,[],!1,null,null,null);b.options.__file="content/jcr_root/apps/subaru/components/content/commons/Ribbon/webpack.module/js/Ribbon.vue";t.default=b.exports},468:function(i,t,e){"use strict";e.d(t,"a",(function(){return n}));var n=new(e(0).a)},764:function(i,t,e){var n=e(19),a=e(1165);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[i.i,a,""]]);var s={insert:"head",singleton:!1};n(a,s);i.exports=a.locals||{}}}]);